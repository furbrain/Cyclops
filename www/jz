!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ROSLIB=t():e.ROSLIB=t()}(this,()=>(()=>{var e,t,r,i,n={228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,s||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,n),!0;case 5:return u.fn.call(u.context,t,i,n,s),!0;case 6:return u.fn.call(u.context,t,i,n,s,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,n);break;default:if(!c)for(p=1,c=new Array(h-1);p<h;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||a(this,s);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||n&&!o[c].once||i&&o[c].context!==i)&&l.push(o[c]);l.length?this._events[s]=1===l.length?l[0]:l:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},455:function(e,t,r){var i,n;!function(s,a){"use strict";var o=Math.pow(2,-24),c=Math.pow(2,32),l=Math.pow(2,53);(n="function"==typeof(i={encode:function(e){var t,r=new ArrayBuffer(256),i=new DataView(r),n=0;function s(e){for(var s=r.byteLength,a=n+e;s<a;)s*=2;if(s!==r.byteLength){var o=i;r=new ArrayBuffer(s),i=new DataView(r);for(var c=n+3>>2,l=0;l<c;++l)i.setUint32(4*l,o.getUint32(4*l))}return t=e,i}function o(){n+=t}function u(e){o(s(1).setUint8(n,e))}function h(e){for(var t=s(e.length),r=0;r<e.length;++r)t.setUint8(n+r,e[r]);o()}function p(e,t){t<24?u(e<<5|t):t<256?(u(e<<5|24),u(t)):t<65536?(u(e<<5|25),function(e){o(s(2).setUint16(n,e))}(t)):t<4294967296?(u(e<<5|26),function(e){o(s(4).setUint32(n,e))}(t)):(u(e<<5|27),function(e){var t=e%c,r=(e-t)/c,i=s(8);i.setUint32(n,r),i.setUint32(n+4,t),o()}(t))}if(function e(t){var r;if(!1===t)return u(244);if(!0===t)return u(245);if(null===t)return u(246);if(t===a)return u(247);switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=l)return p(0,t);if(-l<=t&&t<0)return p(1,-(t+1))}return u(251),function(e){o(s(8).setFloat64(n,e))}(t);case"string":var i=[];for(r=0;r<t.length;++r){var c=t.charCodeAt(r);c<128?i.push(c):c<2048?(i.push(192|c>>6),i.push(128|63&c)):c<55296?(i.push(224|c>>12),i.push(128|c>>6&63),i.push(128|63&c)):(c=(1023&c)<<10,c|=1023&t.charCodeAt(++r),c+=65536,i.push(240|c>>18),i.push(128|c>>12&63),i.push(128|c>>6&63),i.push(128|63&c))}return p(3,i.length),h(i);default:var f;if(Array.isArray(t))for(p(4,f=t.length),r=0;r<f;++r)e(t[r]);else if(t instanceof Uint8Array)p(2,t.length),h(t);else{var d=Object.keys(t);for(p(5,f=d.length),r=0;r<f;++r){var m=d[r];e(m),e(t[m])}}}}(e),"slice"in r)return r.slice(0,n);for(var f=new ArrayBuffer(n),d=new DataView(f),m=0;m<n;++m)d.setUint8(m,i.getUint8(m));return f},decode:function(e,t,r){var i=new DataView(e),n=0;function s(e,t){return n+=t,e}function l(t){return s(new Uint8Array(e,n,t),t)}function u(){return s(i.getUint8(n),1)}function h(){return s(i.getUint16(n),2)}function p(){return s(i.getUint32(n),4)}function f(){return 255===i.getUint8(n)&&(n+=1,!0)}function d(e){if(e<24)return e;if(24===e)return u();if(25===e)return h();if(26===e)return p();if(27===e)return p()*c+p();if(31===e)return-1;throw"Invalid length encoding"}function m(e){var t=u();if(255===t)return-1;var r=d(31&t);if(r<0||t>>5!==e)throw"Invalid indefinite length element";return r}function v(e,t){for(var r=0;r<t;++r){var i=u();128&i&&(i<224?(i=(31&i)<<6|63&u(),t-=1):i<240?(i=(15&i)<<12|(63&u())<<6|63&u(),t-=2):(i=(15&i)<<18|(63&u())<<12|(63&u())<<6|63&u(),t-=3)),i<65536?e.push(i):(i-=65536,e.push(55296|i>>10),e.push(56320|1023&i))}}"function"!=typeof t&&(t=function(e){return e}),"function"!=typeof r&&(r=function(){return a});var g=function e(){var c,p,g=u(),b=g>>5,y=31&g;if(7===b)switch(y){case 25:return function(){var e=new ArrayBuffer(4),t=new DataView(e),r=h(),i=32768&r,n=31744&r,s=1023&r;if(31744===n)n=261120;else if(0!==n)n+=114688;else if(0!==s)return s*o;return t.setUint32(0,i<<16|n<<13|s<<13),t.getFloat32(0)}();case 26:return s(i.getFloat32(n),4);case 27:return s(i.getFloat64(n),8)}if((p=d(y))<0&&(b<2||6<b))throw"Invalid length";switch(b){case 0:return p;case 1:return-1-p;case 2:if(p<0){for(var w=[],N=0;(p=m(b))>=0;)N+=p,w.push(l(p));var T=new Uint8Array(N),_=0;for(c=0;c<w.length;++c)T.set(w[c],_),_+=w[c].length;return T}return l(p);case 3:var x=[];if(p<0)for(;(p=m(b))>=0;)v(x,p);else v(x,p);return String.fromCharCode.apply(null,x);case 4:var E;if(p<0)for(E=[];!f();)E.push(e());else for(E=new Array(p),c=0;c<p;++c)E[c]=e();return E;case 5:var S={};for(c=0;c<p||p<0&&!f();++c)S[e()]=e();return S;case 6:return t(e(),p);case 7:switch(p){case 20:return!1;case 21:return!0;case 22:return null;case 23:return a;default:return r(p)}}}();if(n!==e.byteLength)throw"Remaining bytes";return g}})?i.call(t,r,t,e):i)===a||(e.exports=n)}()},466:(e,t,r)=>{var i=r(582).NAMESPACE,n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+n.source+s.source+"*(?::"+n.source+s.source+"*)?$");function o(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function c(){}function l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function u(e,t,r,n,s,a){function o(e,t,i){r.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),r.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),i)}for(var c,l=++t,u=0;;){var h=e.charAt(l);switch(h){case"=":if(1===u)c=e.slice(t,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(a.warning('attribute value must after "="'),c=e.slice(t,l)),t=l+1,!((l=e.indexOf(h,t))>0))throw new Error("attribute value no end '"+h+"' match");o(c,p=e.slice(t,l),t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');o(c,p=e.slice(t,l),t),a.warning('attribute "'+c+'" missed start quot('+h+")!!"),t=l+1,u=5}break;case"/":switch(u){case 0:r.setTagName(e.slice(t,l));case 5:case 6:case 7:u=7,r.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==u&&r.setTagName(e.slice(t,l)),l;case">":switch(u){case 0:r.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,l)).slice(-1)&&(r.closed=!0,p=p.slice(0,-1));case 2:2===u&&(p=c),4==u?(a.warning('attribute "'+p+'" missed quot(")!'),o(c,p,t)):(i.isHTML(n[""])&&p.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),o(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"":h=" ";default:if(h<=" ")switch(u){case 0:r.setTagName(e.slice(t,l)),u=6;break;case 1:c=e.slice(t,l),u=2;break;case 4:var p=e.slice(t,l);a.warning('attribute "'+p+'" missed quot(")!!'),o(c,p,t);case 5:u=6}else switch(u){case 2:r.tagName,i.isHTML(n[""])&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),o(c,c,t),t=l,u=1;break;case 5:a.warning('attribute space is required"'+c+'"!!');case 6:u=1,t=l;break;case 3:u=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function h(e,t,r){for(var n=e.tagName,s=null,a=e.length;a--;){var o=e[a],c=o.qName,l=o.value;if((f=c.indexOf(":"))>0)var u=o.prefix=c.slice(0,f),h=c.slice(f+1),p="xmlns"===u&&h;else h=c,u=null,p="xmlns"===c&&"";o.localName=h,!1!==p&&(null==s&&(s={},d(r,r={})),r[p]=s[p]=l,o.uri=i.XMLNS,t.startPrefixMapping(p,l))}for(a=e.length;a--;)(u=(o=e[a]).prefix)&&("xml"===u&&(o.uri=i.XML),"xmlns"!==u&&(o.uri=r[u||""]));var f;(f=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,f),h=e.localName=n.slice(f+1)):(u=null,h=e.localName=n);var m=e.uri=r[u||""];if(t.startElement(m,h,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=s,!0;if(t.endElement(m,h,n),s)for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&t.endPrefixMapping(u)}function p(e,t,r,i,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),a=e.substring(t+1,s);if(/[&<]/.test(a))return/^script$/i.test(r)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),n.characters(a,0,a.length),s)}return t+1}function f(e,t,r,i){var n=i[r];return null==n&&((n=e.lastIndexOf("</"+r+">"))<t&&(n=e.lastIndexOf("</"+r)),i[r]=n),n<t}function d(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function m(e,t,r,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(n=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,n-t-4),n+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var n=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,n-t-9),r.endCDATA(),n+3}var s=function(e,t){var r,i=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(i.push(r),r[1])return i}(e,t),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],c=!1,l=!1;a>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],l=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(l=s[3][0]));var u=s[a-1];return r.startDTD(o,c,l),r.endDTD(),u.index+u[0].length}return-1}function v(e,t,r){var i=e.indexOf("?>",t);if(i){var n=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,r.processingInstruction(n[1],n[2]),i+2):-1}return-1}function g(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,c.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),d(t,t={}),function(e,t,r,n,s){function a(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(r,t)?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function c(t){if(t>x){var r=e.substring(x,t).replace(/&#?\w+;/g,a);N&&d(x),n.characters(r,0,t-x),x=t}}function d(t,r){for(;t>=y&&(r=w.exec(e));)b=r.index,y=b+r[0].length,N.lineNumber++;N.columnNumber=t-b+1}for(var b=0,y=0,w=/.*(?:\r\n?|\n)|.*$/g,N=n.locator,T=[{currentNSMap:t}],_={},x=0;;){try{var E=e.indexOf("<",x);if(E<0){if(!e.substr(x).match(/^\s*$/)){var S=n.doc,A=S.createTextNode(e.substr(x));S.appendChild(A),n.currentElement=A}return}switch(E>x&&c(E),e.charAt(E+1)){case"/":var C=e.indexOf(">",E+3),O=e.substring(E+2,C).replace(/[ \t\n\r]+$/g,""),D=T.pop();C<0?(O=e.substring(E+2).replace(/[\s<].*/,""),s.error("end tag name: "+O+" is not complete:"+D.tagName),C=E+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,""),s.error("end tag name: "+O+" maybe not complete"),C=E+1+O.length);var M=D.localNSMap,I=D.tagName==O;if(I||D.tagName&&D.tagName.toLowerCase()==O.toLowerCase()){if(n.endElement(D.uri,D.localName,O),M)for(var R in M)Object.prototype.hasOwnProperty.call(M,R)&&n.endPrefixMapping(R);I||s.fatalError("end tag name: "+O+" is not match the current start tagName:"+D.tagName)}else T.push(D);C++;break;case"?":N&&d(E),C=v(e,E,n);break;case"!":N&&d(E),C=m(e,E,n,s);break;default:N&&d(E);var k=new g,F=T[T.length-1].currentNSMap,U=(C=u(e,E,k,F,a,s),k.length);if(!k.closed&&f(e,C,k.tagName,_)&&(k.closed=!0,r.nbsp||s.warning("unclosed xml attribute")),N&&U){for(var L=l(N,{}),P=0;P<U;P++){var G=k[P];d(G.offset),G.locator=l(N,{})}n.locator=L,h(k,n,F)&&T.push(k),n.locator=N}else h(k,n,F)&&T.push(k);i.isHTML(k.uri)&&!k.closed?C=p(e,C,k.tagName,a,n):C++}}catch(e){if(e instanceof o)throw e;s.error("element parse error: "+e),C=-1}C>x?x=C:c(Math.max(E,x)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},g.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=c,t.ParseError=o},559:(e,t,r)=>{var i=r(582).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES},582:(e,t)=>{"use strict";function r(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var i=r({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=r({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.freeze=r,t.MIME_TYPE=i,t.NAMESPACE=n},722:(e,t,r)=>{var i=r(582).NAMESPACE;function n(e){return""!==e}function s(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function a(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(n):[]}(e);return Object.keys(t.reduce(s,{}))}function o(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function c(e,t){var r=e.prototype;if(!(r instanceof t)){function i(){}i.prototype=t.prototype,o(r,i=new i),e.prototype=r=i}r.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),r.constructor=e)}var l={},u=l.ELEMENT_NODE=1,h=l.ATTRIBUTE_NODE=2,p=l.TEXT_NODE=3,f=l.CDATA_SECTION_NODE=4,d=l.ENTITY_REFERENCE_NODE=5,m=l.ENTITY_NODE=6,v=l.PROCESSING_INSTRUCTION_NODE=7,g=l.COMMENT_NODE=8,b=l.DOCUMENT_NODE=9,y=l.DOCUMENT_TYPE_NODE=10,w=l.DOCUMENT_FRAGMENT_NODE=11,N=l.NOTATION_NODE=12,T={},_={},x=(T.INDEX_SIZE_ERR=(_[1]="Index size error",1),T.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),T.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),E=(T.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),T.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),T.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),T.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),T.NOT_FOUND_ERR=(_[8]="Not found",8)),S=(T.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),T.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));function A(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,_[e]),this.message=_[e],Error.captureStackTrace&&Error.captureStackTrace(this,A);return r.code=e,t&&(this.message=this.message+": "+t),r}function C(){}function O(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);fe(e,"length",r.length),o(r,e),e._inc=t}}function M(){}function I(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function R(e,t,r,n){if(n?t[I(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var s=e.ownerDocument;s&&(n&&z(s,e,n),function(e,t,r){e&&e._inc++,r.namespaceURI===i.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(s,e,r))}}function k(e,t,r){var i=I(t,r);if(!(i>=0))throw new A(E,new Error(e.tagName+"@"+r));for(var n=t.length-1;i<n;)t[i]=t[++i];if(t.length=n,e){var s=e.ownerDocument;s&&(z(s,e,r),r.ownerElement=null)}}function F(){}function U(){}function L(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function P(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(P(e,t))return!0}while(e=e.nextSibling)}function G(){}function z(e,t,r,n){e&&e._inc++,r.namespaceURI===i.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function B(e,t,r){if(e&&e._inc){e._inc++;var i=t.childNodes;if(r)i[i.length++]=r;else{for(var n=t.firstChild,s=0;n;)i[s++]=n,n=n.nextSibling;i.length=s,delete i[i.length]}}}function j(e,t){var r=t.previousSibling,i=t.nextSibling;return r?r.nextSibling=i:e.firstChild=i,i?i.previousSibling=r:e.lastChild=r,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,B(e.ownerDocument,e),t}function q(e){return e&&e.nodeType===U.DOCUMENT_TYPE_NODE}function V(e){return e&&e.nodeType===U.ELEMENT_NODE}function H(e){return e&&e.nodeType===U.TEXT_NODE}function X(e,t){var r=e.childNodes||[];if(r.find(V)||q(t))return!1;var i=r.find(q);return!(t&&i&&r.indexOf(i)>r.indexOf(t))}function $(e,t,r){if(!function(e){return e&&(e.nodeType===U.DOCUMENT_NODE||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.ELEMENT_NODE)}(e))throw new A(x,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new A(E,"child not in parent");if(!function(e){return e&&(V(e)||H(e)||q(e)||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.COMMENT_NODE||e.nodeType===U.PROCESSING_INSTRUCTION_NODE)}(t)||q(t)&&e.nodeType!==U.DOCUMENT_NODE)throw new A(x,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType);var i=e.childNodes||[],n=t.childNodes||[];if(e.nodeType===U.DOCUMENT_NODE){if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){let t=n.filter(V);if(t.length>1||n.find(H))throw new A(x,"More than one element or text in fragment");if(1===t.length&&!X(e,r))throw new A(x,"Element in fragment can not be inserted before doctype")}if(V(t)&&(i.find(V)||!X(e,r)))throw new A(x,"Only one element can be added and only after doctype");if(q(t)){if(i.find(q))throw new A(x,"Only one doctype is allowed");let e=i.find(V);if(r&&i.indexOf(e)<i.indexOf(r))throw new A(x,"Doctype can only be inserted before an element");if(!r&&e)throw new A(x,"Doctype can not be appended since element is present")}}var s=t.parentNode;if(s&&s.removeChild(t),t.nodeType===w){var a=t.firstChild;if(null==a)return t;var o=t.lastChild}else a=o=t;var c=r?r.previousSibling:e.lastChild;a.previousSibling=c,o.nextSibling=r,c?c.nextSibling=a:e.firstChild=a,null==r?e.lastChild=o:r.previousSibling=o;do{a.parentNode=e}while(a!==o&&(a=a.nextSibling));return B(e.ownerDocument||e,e),t.nodeType==w&&(t.firstChild=t.lastChild=null),t}function Y(){this._nsMap={}}function Q(){}function W(){}function J(){}function Z(){}function K(){}function ee(){}function te(){}function re(){}function ie(){}function ne(){}function se(){}function ae(){}function oe(e,t){var r=[],i=9==this.nodeType&&this.documentElement||this,n=i.prefix,s=i.namespaceURI;if(s&&null==n&&null==(n=i.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return ue(this,r,e,t,a),r.join("")}function ce(e,t,r){var n=e.prefix||"",s=e.namespaceURI;if(!s)return!1;if("xml"===n&&s===i.XML||s===i.XMLNS)return!1;for(var a=r.length;a--;){var o=r[a];if(o.prefix===n)return o.namespace!==s}return!0}function le(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,L),'"')}function ue(e,t,r,n,s){if(s||(s=[]),n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case u:var a=e.attributes,o=a.length,c=e.firstChild,l=e.tagName,m=l;if(!(r=i.isHTML(e.namespaceURI)||r)&&!e.prefix&&e.namespaceURI){for(var N,T=0;T<a.length;T++)if("xmlns"===a.item(T).name){N=a.item(T).value;break}if(!N)for(var _=s.length-1;_>=0;_--)if(""===(x=s[_]).prefix&&x.namespace===e.namespaceURI){N=x.namespace;break}if(N!==e.namespaceURI)for(_=s.length-1;_>=0;_--){var x;if((x=s[_]).namespace===e.namespaceURI){x.prefix&&(m=x.prefix+":"+l);break}}}t.push("<",m);for(var E=0;E<o;E++)"xmlns"==(S=a.item(E)).prefix?s.push({prefix:S.localName,namespace:S.value}):"xmlns"==S.nodeName&&s.push({prefix:"",namespace:S.value});for(E=0;E<o;E++){var S,A,C;ce(S=a.item(E),0,s)&&(le(t,(A=S.prefix||"")?"xmlns:"+A:"xmlns",C=S.namespaceURI),s.push({prefix:A,namespace:C})),ue(S,t,r,n,s)}if(l===m&&ce(e,0,s)&&(le(t,(A=e.prefix||"")?"xmlns:"+A:"xmlns",C=e.namespaceURI),s.push({prefix:A,namespace:C})),c||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),r&&/^script$/i.test(l))for(;c;)c.data?t.push(c.data):ue(c,t,r,n,s.slice()),c=c.nextSibling;else for(;c;)ue(c,t,r,n,s.slice()),c=c.nextSibling;t.push("</",m,">")}else t.push("/>");return;case b:case w:for(c=e.firstChild;c;)ue(c,t,r,n,s.slice()),c=c.nextSibling;return;case h:return le(t,e.name,e.value);case p:return t.push(e.data.replace(/[<&>]/g,L));case f:return t.push("<![CDATA[",e.data,"]]>");case g:return t.push("\x3c!--",e.data,"--\x3e");case y:var O=e.publicId,D=e.systemId;if(t.push("<!DOCTYPE ",e.name),O)t.push(" PUBLIC ",O),D&&"."!=D&&t.push(" ",D),t.push(">");else if(D&&"."!=D)t.push(" SYSTEM ",D,">");else{var M=e.internalSubset;M&&t.push(" [",M,"]"),t.push(">")}return;case v:return t.push("<?",e.target," ",e.data,"?>");case d:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function he(e,t,r){var i;switch(t.nodeType){case u:(i=t.cloneNode(!1)).ownerDocument=e;case w:break;case h:r=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,r)for(var n=t.firstChild;n;)i.appendChild(he(e,n,r)),n=n.nextSibling;return i}function pe(e,t,r){var i=new t.constructor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=t[n];"object"!=typeof s&&s!=i[n]&&(i[n]=s)}switch(t.childNodes&&(i.childNodes=new C),i.ownerDocument=e,i.nodeType){case u:var a=t.attributes,o=i.attributes=new M,c=a.length;o._ownerElement=i;for(var l=0;l<c;l++)i.setAttributeNode(pe(e,a.item(l),!0));break;case h:r=!0}if(r)for(var p=t.firstChild;p;)i.appendChild(pe(e,p,r)),p=p.nextSibling;return i}function fe(e,t,r){e[t]=r}T.INVALID_STATE_ERR=(_[11]="Invalid state",11),T.SYNTAX_ERR=(_[12]="Syntax error",12),T.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),T.NAMESPACE_ERR=(_[14]="Invalid namespace",14),T.INVALID_ACCESS_ERR=(_[15]="Invalid access",15),A.prototype=Error.prototype,o(T,A),C.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],i=0;i<this.length;i++)ue(this[i],r,e,t);return r.join("")},find:function(e){return Array.prototype.find.call(this,e)},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},O.prototype.item=function(e){return D(this),this[e]},c(O,C),M.prototype={length:0,item:C.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new A(S);var r=this.getNamedItem(e.nodeName);return R(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new A(S);return t=this.getNamedItemNS(e.namespaceURI,e.localName),R(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return k(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return k(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var i=this[r];if(i.localName==t&&i.namespaceURI==e)return i}return null}},F.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var i=new G;if(i.implementation=this,i.childNodes=new C,i.doctype=r||null,r&&i.appendChild(r),t){var n=i.createElementNS(e,t);i.appendChild(n)}return i},createDocumentType:function(e,t,r){var i=new ee;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=r||"",i}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return $(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return j(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return pe(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==p&&e.nodeType==p?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&r[i]===e)return i;t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},o(l,U),o(l,U.prototype),G.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==w){for(var r=e.firstChild;r;){var i=r.nextSibling;this.insertBefore(r,t),r=i}return e}return $(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===u&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),j(this,e)},importNode:function(e,t){return he(this,e,t)},getElementById:function(e){var t=null;return P(this.documentElement,function(r){if(r.nodeType==u&&r.getAttribute("id")==e)return t=r,!0}),t},getElementsByClassName:function(e){var t=a(e);return new O(this,function(r){var i=[];return t.length>0&&P(r.documentElement,function(n){if(n!==r&&n.nodeType===u){var s=n.getAttribute("class");if(s){var o=e===s;if(!o){var c=a(s);o=t.every((l=c,function(e){return l&&-1!==l.indexOf(e)}))}o&&i.push(n)}}var l}),i})},createElement:function(e){var t=new Y;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new C,(t.attributes=new M)._ownerElement=t,t},createDocumentFragment:function(){var e=new ne;return e.ownerDocument=this,e.childNodes=new C,e},createTextNode:function(e){var t=new J;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Z;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new K;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new se;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new Q;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ie;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new Y,i=t.split(":"),n=r.attributes=new M;return r.childNodes=new C,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==i.length?(r.prefix=i[0],r.localName=i[1]):r.localName=t,n._ownerElement=r,r},createAttributeNS:function(e,t){var r=new Q,i=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==i.length?(r.prefix=i[0],r.localName=i[1]):r.localName=t,r}},c(G,U),Y.prototype={nodeType:u,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===w?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,B(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+r,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new O(this,function(t){var r=[];return P(t,function(i){i===t||i.nodeType!=u||"*"!==e&&i.tagName!=e||r.push(i)}),r})},getElementsByTagNameNS:function(e,t){return new O(this,function(r){var i=[];return P(r,function(n){n===r||n.nodeType!==u||"*"!==e&&n.namespaceURI!==e||"*"!==t&&n.localName!=t||i.push(n)}),i})}},G.prototype.getElementsByTagName=Y.prototype.getElementsByTagName,G.prototype.getElementsByTagNameNS=Y.prototype.getElementsByTagNameNS,c(Y,U),Q.prototype.nodeType=h,c(Q,U),W.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(_[x])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},c(W,U),J.prototype={nodeName:"#text",nodeType:p,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},c(J,W),Z.prototype={nodeName:"#comment",nodeType:g},c(Z,W),K.prototype={nodeName:"#cdata-section",nodeType:f},c(K,W),ee.prototype.nodeType=y,c(ee,U),te.prototype.nodeType=N,c(te,U),re.prototype.nodeType=m,c(re,U),ie.prototype.nodeType=d,c(ie,U),ne.prototype.nodeName="#document-fragment",ne.prototype.nodeType=w,c(ne,U),se.prototype.nodeType=v,c(se,U),ae.prototype.serializeToString=function(e,t,r){return oe.call(e,t,r)},U.prototype.toString=oe;try{if(Object.defineProperty){function de(e){switch(e.nodeType){case u:case w:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(de(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(O.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return de(this)},set:function(e){switch(this.nodeType){case u:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),fe=function(e,t,r){e["$$"+t]=r}}}catch(me){}t.DocumentType=ee,t.DOMException=A,t.DOMImplementation=F,t.Element=Y,t.Node=U,t.NodeList=C,t.XMLSerializer=ae},752:(e,t,r)=>{var i=r(582),n=r(722),s=r(559),a=r(466),o=n.DOMImplementation,c=i.NAMESPACE,l=a.ParseError,u=a.XMLReader;function h(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function f(){this.cdata=!1}function d(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function m(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function v(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function g(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var r=this.options,i=new u,n=r.domBuilder||new f,a=r.errorHandler,o=r.locator,l=r.xmlns||{},p=/\/x?html?$/.test(t),d=p?s.HTML_ENTITIES:s.XML_ENTITIES;o&&n.setDocumentLocator(o),i.errorHandler=function(e,t,r){if(!e){if(t instanceof f)return t;e=t}var i={},n=e instanceof Function;function s(t){var s=e[t];!s&&n&&(s=2==e.length?function(r){e(t,r)}:e),i[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+m(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),i}(a,n,o),i.domBuilder=r.domBuilder||n,p&&(l[""]=c.HTML),l.xml=l.xml||c.XML;var v=r.normalizeLineEndings||h;return e&&"string"==typeof e?i.parse(v(e),l,d):i.errorHandler.error("invalid doc source"),n.doc},f.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,i){var n=this.doc,s=n.createElementNS(e,r||t),a=i.length;g(this,s),this.currentElement=s,this.locator&&d(this.locator,s);for(var o=0;o<a;o++){e=i.getURI(o);var c=i.getValue(o),l=(r=i.getQName(o),n.createAttributeNS(e,r));this.locator&&d(i.getLocator(o),l),l.value=l.nodeValue=c,s.setAttributeNode(l)}},endElement:function(e,t,r){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&d(this.locator,r),g(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=v.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&d(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=v.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&d(this.locator,i),g(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var i=this.doc.implementation;if(i&&i.createDocumentType){var n=i.createDocumentType(e,t,r);this.locator&&d(this.locator,n),g(this,n),this.doc.doctype=n}},warning:function(e){console.warn("[xmldom warning]\t"+e,m(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,m(this.locator))},fatalError:function(e){throw new l(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){f.prototype[e]=function(){return null}}),t.DOMParser=p},978:(e,t,r)=>{var i=r(722);i.DOMImplementation,i.XMLSerializer,t.DOMParser=r(752).DOMParser}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e].call(r.exports,r,r.exports,a),r.exports}a.m=n,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"==typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"==typeof r.then)return r}var n=Object.create(null);a.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,a.d(n,s),n},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>e+".roslib.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},i="ROSLIB:",a.l=(e,t,n,s)=>{if(r[e])r[e].push(t);else{var o,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==i+n){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",i+n),o.src=e),r[e]=[t];var p=(t,i)=>{o.onerror=o.onload=null,clearTimeout(f);var n=r[e];if(delete r[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(i)),t)return t(i)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),c&&document.head.appendChild(o)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={792:0};a.f.j=(t,r)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var n=new Promise((r,n)=>i=e[t]=[r,n]);r.push(i[2]=n);var s=a.p+a.u(t),o=new Error;a.l(s,r=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,n,[s,o,c]=r,l=0;if(s.some(t=>0!==e[t])){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);c&&c(a)}for(t&&t(r);l<s.length;l++)n=s[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=this.webpackChunkROSLIB=this.webpackChunkROSLIB||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o={};return(()=>{"use strict";a.r(o),a.d(o,{Action:()=>C,ActionClient:()=>w,ActionListener:()=>O,Goal:()=>N,Param:()=>y,Pose:()=>D,Quaternion:()=>_,REVISION:()=>$,ROS2TFClient:()=>M,Ros:()=>A,Service:()=>b,SimpleActionServer:()=>S,TFClient:()=>E,Topic:()=>g,Transform:()=>x,URDF_BOX:()=>R,URDF_CYLINDER:()=>k,URDF_MESH:()=>F,URDF_SPHERE:()=>I,UrdfBox:()=>U,UrdfColor:()=>L,UrdfCylinder:()=>P,UrdfLink:()=>q,UrdfMaterial:()=>G,UrdfMesh:()=>z,UrdfModel:()=>X,UrdfSphere:()=>B,UrdfVisual:()=>j,Vector3:()=>T});var e={};a.r(e),a.d(e,{Action:()=>C,Param:()=>y,Ros:()=>A,Service:()=>b,Topic:()=>g});var t={};a.r(t),a.d(t,{ActionClient:()=>w,ActionListener:()=>O,Goal:()=>N,SimpleActionServer:()=>S});var r={};a.r(r),a.d(r,{Pose:()=>D,Quaternion:()=>_,Transform:()=>x,Vector3:()=>T});var i={};a.r(i),a.d(i,{ROS2TFClient:()=>M,TFClient:()=>E});var n={};a.r(n),a.d(n,{URDF_BOX:()=>R,URDF_CYLINDER:()=>k,URDF_MESH:()=>F,URDF_SPHERE:()=>I,UrdfBox:()=>U,UrdfColor:()=>L,UrdfCylinder:()=>P,UrdfLink:()=>q,UrdfMaterial:()=>G,UrdfMesh:()=>z,UrdfModel:()=>X,UrdfSphere:()=>B,UrdfVisual:()=>j});var s=a(455),c=Math.pow(2,32),l=!1;function u(){l||(l=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}var h={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},p={71:function(e){u();for(var t=e.byteLength,r=e.byteOffset,i=t/8,n=e.buffer.slice(r,r+t),s=new Uint32Array(n),a=new Array(i),o=0;o<i;o++){var l=2*o,h=s[l],p=s[l+1];a[o]=h+c*p}return a},79:function(e){u();for(var t=e.byteLength,r=e.byteOffset,i=t/8,n=e.buffer.slice(r,r+t),s=new Uint32Array(n),a=new Int32Array(n),o=new Array(i),l=0;l<i;l++){var h=2*l,p=s[h],f=a[h+1];o[l]=p+c*f}return o}};function f(e,t){var r,i,n,s;return t in h?(i=h[t],n=(r=e).byteLength,s=r.byteOffset,new i(r.buffer.slice(s,s+n))):t in p?p[t](e):e}var d=null;function m(e){var t=null;function r(t){"publish"===t.op?e.emit(t.topic,t.msg):"service_response"===t.op?e.emit(t.id,t):"call_service"===t.op?e.emit(t.service,t):"send_action_goal"===t.op?e.emit(t.action,t):"cancel_action_goal"===t.op||"action_feedback"===t.op||"action_result"===t.op?e.emit(t.id,t):"status"===t.op&&(t.id?e.emit("status:"+t.id,t):e.emit("status",t))}function i(e,t){"png"===e.op?"undefined"==typeof window?a.e(180).then(a.bind(a,180)).then(({default:r})=>r(e.data,t)):a.e(240).then(a.bind(a,240)).then(({default:r})=>r(e.data,t)):t(e)}return e.transportOptions.decoder&&(t=e.transportOptions.decoder),{onopen:function(t){e.isConnected=!0,e.emit("connection",t)},onclose:function(t){e.isConnected=!1,e.emit("close",t)},onerror:function(t){e.emit("error",t)},onmessage:function(e){t?t(e.data,function(e){r(e)}):"undefined"!=typeof Blob&&e.data instanceof Blob?function(e){if(!d)throw"Cannot process BSON encoded message without BSON header.";var t=new FileReader;t.onload=function(){var e=new Uint8Array(this.result),t=d.deserialize(e);i(t,r)},t.readAsArrayBuffer(e)}(e.data):e.data instanceof ArrayBuffer?r(s.decode(e.data,f)):i(JSON.parse("string"==typeof e?e:e.data),r)}}}"undefined"!=typeof bson&&(d=bson().BSON);var v=a(228);class g extends v{waitForReconnect=void 0;reconnectFunc=void 0;isAdvertised=!1;constructor(e){super(),this.ros=e.ros,this.name=e.name,this.messageType=e.messageType,this.compression=e.compression||"none",this.throttle_rate=e.throttle_rate||0,this.latch=e.latch||!1,this.queue_size=e.queue_size||100,this.queue_length=e.queue_length||0,this.reconnect_on_close=void 0===e.reconnect_on_close||e.reconnect_on_close,this.compression&&"png"!==this.compression&&"cbor"!==this.compression&&"cbor-raw"!==this.compression&&"none"!==this.compression&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0),this.reconnect_on_close?this.callForSubscribeAndAdvertise=e=>{this.ros.callOnConnection(e),this.waitForReconnect=!1,this.reconnectFunc=()=>{this.waitForReconnect||(this.waitForReconnect=!0,this.ros.callOnConnection(e),this.ros.once("connection",()=>{this.waitForReconnect=!1}))},this.ros.on("close",this.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection}_messageCallback=e=>{this.emit("message",e)};subscribe(e){"function"==typeof e&&this.on("message",e),this.subscribeId||(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+(++this.ros.idCounter).toString(),this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))}unsubscribe(e){e&&(this.off("message",e),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)}advertise(){this.isAdvertised||(this.advertiseId="advertise:"+this.name+":"+(++this.ros.idCounter).toString(),this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,this.reconnect_on_close||this.ros.on("close",()=>{this.isAdvertised=!1}))}unadvertise(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)}publish(e){this.isAdvertised||this.advertise(),this.ros.idCounter++;var t={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:e,latch:this.latch};this.ros.callOnConnection(t)}}class b extends v{_serviceCallback=null;isAdvertised=!1;constructor(e){super(),this.ros=e.ros,this.name=e.name,this.serviceType=e.serviceType}callService(e,t,r){if(!this.isAdvertised){var i="call_service:"+this.name+":"+(++this.ros.idCounter).toString();(t||r)&&this.ros.once(i,function(e){void 0!==e.result&&!1===e.result?"function"==typeof r&&r(e.values):"function"==typeof t&&t(e.values)});var n={op:"call_service",id:i,service:this.name,type:this.serviceType,args:e};this.ros.callOnConnection(n)}}advertise(e){if(this.isAdvertised)throw new Error("Cannot advertise the same Service twice!");this._serviceCallback=t=>{var r={},i=e(t.args,r),n={op:"service_response",service:this.name,values:r,result:i};t.id&&(n.id=t.id),this.ros.callOnConnection(n)},this.ros.on(this.name,this._serviceCallback),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0}unadvertise(){if(!this.isAdvertised)throw new Error(`Tried to un-advertise service ${this.name}, but it was not advertised!`);this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this._serviceCallback&&this.ros.off(this.name,this._serviceCallback),this.isAdvertised=!1}advertiseAsync(e){if(this.isAdvertised)throw new Error("Cannot advertise the same Service twice!");this._serviceCallback=async t=>{let r={op:"service_response",service:this.name,result:!1};try{r.values=await e(t.args),r.result=!0}finally{t.id&&(r.id=t.id),this.ros.callOnConnection(r)}},this.ros.on(this.name,this._serviceCallback),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0}}class y{constructor(e){this.ros=e.ros,this.name=e.name}get(e,t){var r=new b({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),i={name:this.name};r.callService(i,function(t){var r=JSON.parse(t.value);e(r)},t)}set(e,t,r){var i=new b({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),n={name:this.name,value:JSON.stringify(e)};i.callService(n,t,r)}delete(e,t){var r=new b({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),i={name:this.name};r.callService(i,e,t)}}class w extends v{goals={};receivedStatus=!1;constructor(e){super(),this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult,this.feedbackListener=new g({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new g({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new g({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new g({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new g({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(e=>{this.receivedStatus=!0,e.status_list.forEach(e=>{var t=this.goals[e.goal_id.id];t&&t.emit("status",e)})}),this.omitFeedback||this.feedbackListener.subscribe(e=>{var t=this.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("feedback",e.feedback))}),this.omitResult||this.resultListener.subscribe(e=>{var t=this.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("result",e.result))}),this.timeout&&setTimeout(()=>{this.receivedStatus||this.emit("timeout")},this.timeout)}cancel(){this.cancelTopic.publish({})}dispose(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()}}class N extends v{isFinished=!1;status=void 0;result=void 0;feedback=void 0;goalID="goal_"+Math.random()+"_"+(new Date).getTime();constructor(e){super(),this.actionClient=e.actionClient,this.goalMessage={goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:e.goalMessage},this.on("status",e=>{this.status=e}),this.on("result",e=>{this.isFinished=!0,this.result=e}),this.on("feedback",e=>{this.feedback=e}),this.actionClient.goals[this.goalID]=this}send(e){this.actionClient.goalTopic.publish(this.goalMessage),e&&setTimeout(()=>{this.isFinished||this.emit("timeout")},e)}cancel(){var e={id:this.goalID};this.actionClient.cancelTopic.publish(e)}}class T{constructor(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0}add(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}subtract(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}multiplyQuaternion(e){var t=e.w*this.x+e.y*this.z-e.z*this.y,r=e.w*this.y+e.z*this.x-e.x*this.z,i=e.w*this.z+e.x*this.y-e.y*this.x,n=-e.x*this.x-e.y*this.y-e.z*this.z;this.x=t*e.w+n*-e.x+r*-e.z-i*-e.y,this.y=r*e.w+n*-e.y+i*-e.x-t*-e.z,this.z=i*e.w+n*-e.z+t*-e.y-r*-e.x}clone(){return new T(this)}}class _{constructor(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w="number"==typeof e.w?e.w:1}conjugate(){this.x*=-1,this.y*=-1,this.z*=-1}norm(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}normalize(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e)}invert(){this.conjugate(),this.normalize()}multiply(e){var t=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,r=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,i=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,n=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;this.x=t,this.y=r,this.z=i,this.w=n}clone(){return new _(this)}}class x{constructor(e){this.translation=new T(e.translation),this.rotation=new _(e.rotation)}clone(){return new x(this)}}class E extends v{currentGoal=!1;currentTopic=!1;frameInfos={};republisherUpdateRequested=!1;_subscribeCB=void 0;_isDisposed=!1;constructor(e){super(),this.ros=e.ros,this.fixedFrame=e.fixedFrame||"base_link",this.angularThres=e.angularThres||2,this.transThres=e.transThres||.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;var t=e.topicTimeout||2,r=Math.floor(t),i=Math.floor(1e9*(t-r));this.topicTimeout={secs:r,nsecs:i},this.serverName=e.serverName||"/tf2_web_republisher",this.repubServiceName=e.repubServiceName||"/republish_tfs",this.actionClient=new w({ros:e.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new b({ros:e.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}processTFArray(e){e.transforms.forEach(e=>{var t=e.child_frame_id;"/"===t[0]&&(t=t.substring(1));var r=this.frameInfos[t];r&&(r.transform=new x({translation:e.transform.translation,rotation:e.transform.rotation}),r.cbs.forEach(e=>{e(r.transform)}))},this)}updateGoal(){var e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};this.ros.groovyCompatibility?(this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new N({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send()):(e.timeout=this.topicTimeout,this.serviceClient.callService(e,this.processResponse.bind(this))),this.republisherUpdateRequested=!1}processResponse(e){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new g({ros:this.ros,name:e.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))}subscribe(e,t){"/"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&t(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(t)}unsubscribe(e,t){"/"===e[0]&&(e=e.substring(1));for(var r=this.frameInfos[e],i=r&&r.cbs||[],n=i.length;n--;)i[n]===t&&i.splice(n,1);t&&0!==i.length||delete this.frameInfos[e]}dispose(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)}}class S extends v{currentGoal=null;nextGoal=null;constructor(e){super(),this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.feedbackPublisher=new g({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var t=new g({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});t.advertise(),this.resultPublisher=new g({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var r=new g({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),i=new g({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage={header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]},r.subscribe(e=>{this.currentGoal?(this.nextGoal=e,this.emit("cancel")):(this.statusMessage.status_list=[{goal_id:e.goal_id,status:1}],this.currentGoal=e,this.emit("goal",e.goal))});var n=function(e,t){return!(e.secs>t.secs)&&(e.secs<t.secs||e.nsecs<t.nsecs)};i.subscribe(e=>{0===e.stamp.secs&&0===e.stamp.secs&&""===e.id?(this.nextGoal=null,this.currentGoal&&this.emit("cancel")):(this.currentGoal&&e.id===this.currentGoal.goal_id.id?this.emit("cancel"):this.nextGoal&&e.id===this.nextGoal.goal_id.id&&(this.nextGoal=null),this.nextGoal&&n(this.nextGoal.goal_id.stamp,e.stamp)&&(this.nextGoal=null),this.currentGoal&&n(this.currentGoal.goal_id.stamp,e.stamp)&&this.emit("cancel"))}),setInterval(()=>{var e=new Date,r=Math.floor(e.getTime()/1e3),i=Math.round(1e9*(e.getTime()/1e3-r));this.statusMessage.header.stamp.secs=r,this.statusMessage.header.stamp.nsecs=i,t.publish(this.statusMessage)},500)}setSucceeded(e){if(null!==this.currentGoal){var t={status:{goal_id:this.currentGoal.goal_id,status:3},result:e};this.resultPublisher.publish(t),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}setAborted(e){if(null!==this.currentGoal){var t={status:{goal_id:this.currentGoal.goal_id,status:4},result:e};this.resultPublisher.publish(t),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}sendFeedback(e){if(null!==this.currentGoal){var t={status:{goal_id:this.currentGoal.goal_id,status:1},feedback:e};this.feedbackPublisher.publish(t)}}setPreempted(){if(null!==this.currentGoal){this.statusMessage.status_list=[];var e={status:{goal_id:this.currentGoal.goal_id,status:2}};this.resultPublisher.publish(e),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}}class A extends v{socket=null;idCounter=0;isConnected=!1;groovyCompatibility=!0;constructor(e){super(),e=e||{},this.transportLibrary=e.transportLibrary||"websocket",this.transportOptions=e.transportOptions||{},this.groovyCompatibility=e.groovyCompatibility??!0,e.url&&this.connect(e.url)}connect(e){if("RTCPeerConnection"===this.transportLibrary.constructor.name)this.socket=Object.assign(this.transportLibrary.createDataChannel(e,this.transportOptions),m(this));else{if("websocket"!==this.transportLibrary)throw"Unknown transportLibrary: "+this.transportLibrary.toString();if(!this.socket||this.socket.readyState===WebSocket.CLOSED)if("undefined"!=typeof window){const t=new WebSocket(e);t.binaryType="arraybuffer",this.socket=Object.assign(t,m(this))}else a.e(591).then(a.t.bind(a,591,19)).then(t=>{const r=new t.WebSocket(e);r.binaryType="arraybuffer",this.socket=Object.assign(r,m(this))})}}close(){this.socket&&this.socket.close()}authenticate(e,t,r,i,n,s,a){var o={op:"auth",mac:e,client:t,dest:r,rand:i,t:n,level:s,end:a};this.callOnConnection(o)}sendEncodedMessage(e){this.isConnected?null!==this.socket&&this.socket.send(e):this.once("connection",()=>{null!==this.socket&&this.socket.send(e)})}callOnConnection(e){this.transportOptions.encoder?this.transportOptions.encoder(e,this.sendEncodedMessage):this.sendEncodedMessage(JSON.stringify(e))}setStatusLevel(e,t){var r={op:"set_level",level:e,id:t};this.callOnConnection(r)}getActionServers(e,t){var r=new b({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),i={};"function"==typeof t?r.callService(i,function(t){e(t.action_servers)},function(e){t(e)}):r.callService(i,function(t){e(t.action_servers)})}getTopics(e,t){var r=new b({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),i={};"function"==typeof t?r.callService(i,function(t){e(t)},function(e){t(e)}):r.callService(i,function(t){e(t)})}getTopicsForType(e,t,r){var i=new b({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),n={type:e};"function"==typeof r?i.callService(n,function(e){t(e.topics)},function(e){r(e)}):i.callService(n,function(e){t(e.topics)})}getServices(e,t){var r=new b({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),i={};"function"==typeof t?r.callService(i,function(t){e(t.services)},function(e){t(e)}):r.callService(i,function(t){e(t.services)})}getServicesForType(e,t,r){var i=new b({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),n={type:e};"function"==typeof r?i.callService(n,function(e){t(e.services)},function(e){r(e)}):i.callService(n,function(e){t(e.services)})}getServiceRequestDetails(e,t,r){var i=new b({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),n={type:e};"function"==typeof r?i.callService(n,function(e){t(e)},function(e){r(e)}):i.callService(n,function(e){t(e)})}getServiceResponseDetails(e,t,r){var i=new b({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),n={type:e};"function"==typeof r?i.callService(n,function(e){t(e)},function(e){r(e)}):i.callService(n,function(e){t(e)})}getNodes(e,t){var r=new b({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),i={};"function"==typeof t?r.callService(i,function(t){e(t.nodes)},function(e){t(e)}):r.callService(i,function(t){e(t.nodes)})}getNodeDetails(e,t,r){var i=new b({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),n={node:e};"function"==typeof r?i.callService(n,function(e){t(e.subscribing,e.publishing,e.services)},function(e){r(e)}):i.callService(n,function(e){t(e)})}getParams(e,t){var r=new b({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),i={};"function"==typeof t?r.callService(i,function(t){e(t.names)},function(e){t(e)}):r.callService(i,function(t){e(t.names)})}getTopicType(e,t,r){var i=new b({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),n={topic:e};"function"==typeof r?i.callService(n,function(e){t(e.type)},function(e){r(e)}):i.callService(n,function(e){t(e.type)})}getServiceType(e,t,r){var i=new b({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),n={service:e};"function"==typeof r?i.callService(n,function(e){t(e.type)},function(e){r(e)}):i.callService(n,function(e){t(e.type)})}getMessageDetails(e,t,r){var i=new b({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),n={type:e};"function"==typeof r?i.callService(n,function(e){t(e.typedefs)},function(e){r(e)}):i.callService(n,function(e){t(e.typedefs)})}decodeTypeDefs(e){var t=(e,r)=>{for(var i={},n=0;n<e.fieldnames.length;n++){var s=e.fieldarraylen[n],a=e.fieldnames[n],o=e.fieldtypes[n];if(-1===o.indexOf("/"))i[a]=-1===s?o:[o];else{for(var c=!1,l=0;l<r.length;l++)if(r[l].type.toString()===o.toString()){c=r[l];break}if(c){var u=t(c,r);i[a]=-1===s?u:[u]}else this.emit("error","Cannot find "+o+" in decodeTypeDefs")}}return i};return t(e[0],e)}getTopicsAndRawTypes(e,t){var r=new b({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),i={};"function"==typeof t?r.callService(i,function(t){e(t)},function(e){t(e)}):r.callService(i,function(t){e(t)})}Topic(e){return new g({ros:this,...e})}Param(e){return new y({ros:this,...e})}Service(e){return new b({ros:this,...e})}TFClient(e){return new E({ros:this,...e})}ActionClient(e){return new w({ros:this,...e})}SimpleActionServer(e){return new S({ros:this,...e})}}class C extends v{isAdvertised=!1;_actionCallback=null;_cancelCallback=null;constructor(e){super(),this.ros=e.ros,this.name=e.name,this.actionType=e.actionType}sendGoal(e,t,r,i){if(!this.isAdvertised){var n="send_action_goal:"+this.name+":"+ ++this.ros.idCounter;(t||i)&&this.ros.on(n,function(e){void 0!==e.result&&!1===e.result?"function"==typeof i&&i(e.values):"action_feedback"===e.op&&"function"==typeof r?r(e.values):"action_result"===e.op&&"function"==typeof t&&t(e.values)});var s={op:"send_action_goal",id:n,action:this.name,action_type:this.actionType,args:e,feedback:!0};return this.ros.callOnConnection(s),n}}cancelGoal(e){var t={op:"cancel_action_goal",id:e,action:this.name};this.ros.callOnConnection(t)}advertise(e,t){this.isAdvertised||"function"!=typeof e||(this._actionCallback=e,this._cancelCallback=t,this.ros.on(this.name,this._executeAction.bind(this)),this.ros.callOnConnection({op:"advertise_action",type:this.actionType,action:this.name}),this.isAdvertised=!0)}unadvertise(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_action",action:this.name}),this.isAdvertised=!1)}_executeAction(e){var t=e.id;"string"==typeof t&&this.ros.on(t,e=>{"cancel_action_goal"===e.op&&"function"==typeof this._cancelCallback&&this._cancelCallback(t)}),"function"==typeof this._actionCallback&&this._actionCallback(e.args,t)}sendFeedback(e,t){var r={op:"action_feedback",id:e,action:this.name,values:t};this.ros.callOnConnection(r)}setSucceeded(e,t){var r={op:"action_result",id:e,action:this.name,values:t,result:!0};this.ros.callOnConnection(r)}setFailed(e){var t={op:"action_result",id:e,action:this.name,result:!1};this.ros.callOnConnection(t)}}class O extends v{constructor(e){super(),this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName;var t=new g({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),r=new g({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),i=new g({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),n=new g({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});t.subscribe(e=>{this.emit("goal",e)}),i.subscribe(e=>{e.status_list.forEach(e=>{this.emit("status",e)})}),r.subscribe(e=>{this.emit("status",e.status),this.emit("feedback",e.feedback)}),n.subscribe(e=>{this.emit("status",e.status),this.emit("result",e.result)})}}class D{constructor(e){e=(e=e||{})||{},this.position=new T(e.position),this.orientation=new _(e.orientation)}applyTransform(e){this.position.multiplyQuaternion(e.rotation),this.position.add(e.translation);var t=e.rotation.clone();t.multiply(this.orientation),this.orientation=t}clone(){return new D(this)}multiply(e){var t=e.clone();return t.applyTransform({rotation:this.orientation,translation:this.position}),t}getInverse(){var e=this.clone();return e.orientation.invert(),e.position.multiplyQuaternion(e.orientation),e.position.x*=-1,e.position.y*=-1,e.position.z*=-1,e}}class M extends v{constructor(e){super(),this.ros=e.ros,this.fixedFrame=e.fixedFrame||"base_link",this.angularThres=e.angularThres||2,this.transThres=e.transThres||.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;const t=e.topicTimeout||2,r=Math.floor(t),i=Math.floor(1e9*(t-r));this.topicTimeout={secs:r,nsecs:i},this.serverName=e.serverName||"/tf2_web_republisher",this.goal_id="",this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=void 0,this._isDisposed=!1,this.actionClient=new C({ros:e.ros,name:this.serverName,actionType:"tf2_web_republisher_msgs/TFSubscription"})}processTFArray(e){let t=this;e.transforms.forEach(function(e){let r=e.child_frame_id;"/"===r[0]&&(r=r.substring(1));const i=t.frameInfos[r];i&&(i.transform=new x({translation:e.transform.translation,rotation:e.transform.rotation}),i.cbs.forEach(function(e){e(i.transform)}))},this)}updateGoal(){const e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};""!==this.goal_id&&this.actionClient.cancelGoal(this.goal_id),this.currentGoal=e;const t=this.actionClient.sendGoal(e,e=>{},e=>{this.processTFArray(e)});"string"==typeof t&&(this.goal_id=t),this.republisherUpdateRequested=!1}subscribe(e,t){"/"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&t(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(t)}unsubscribe(e,t){"/"===e[0]&&(e=e.substring(1));const r=this.frameInfos[e];for(var i=r&&r.cbs||[],n=i.length;n--;)i[n]===t&&i.splice(n,1);t&&0!==i.length||delete this.frameInfos[e]}dispose(){this._isDisposed=!0}}const I=0,R=1,k=2,F=3;class U{dimension;constructor(e){this.type=R;var t=e.xml.getAttribute("size")?.split(" ");this.dimension=t?new T({x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])}):null}}class L{constructor(e){var t=e.xml.getAttribute("rgba")?.split(" ");t&&(this.r=parseFloat(t[0]),this.g=parseFloat(t[1]),this.b=parseFloat(t[2]),this.a=parseFloat(t[3]))}}class P{constructor(e){this.type=k,this.length=parseFloat(e.xml.getAttribute("length")),this.radius=parseFloat(e.xml.getAttribute("radius"))}}class G{textureFilename=null;color=null;constructor(e){this.name=e.xml.getAttribute("name");var t=e.xml.getElementsByTagName("texture");t.length>0&&(this.textureFilename=t[0].getAttribute("filename"));var r=e.xml.getElementsByTagName("color");r.length>0&&(this.color=new L({xml:r[0]}))}isLink(){return null===this.color&&null===this.textureFilename}assign(e){return Object.assign(this,e)}}class z{scale=null;constructor(e){this.type=F,this.filename=e.xml.getAttribute("filename");var t=e.xml.getAttribute("scale");if(t){var r=t.split(" ");this.scale=new T({x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])})}}}class B{constructor(e){this.type=I,this.radius=parseFloat(e.xml.getAttribute("radius")||"NaN")}}class j{origin=null;geometry=null;material=null;constructor(e){var t=e.xml;this.name=e.xml.getAttribute("name");var r=t.getElementsByTagName("origin");if(0===r.length)this.origin=new D;else{var i=r[0].getAttribute("xyz"),n=new T;if(i){var s=i.split(" ");n=new T({x:parseFloat(s[0]),y:parseFloat(s[1]),z:parseFloat(s[2])})}var a=r[0].getAttribute("rpy"),o=new _;if(a){var c=a.split(" "),l=parseFloat(c[0])/2,u=parseFloat(c[1])/2,h=parseFloat(c[2])/2,p=Math.sin(l)*Math.cos(u)*Math.cos(h)-Math.cos(l)*Math.sin(u)*Math.sin(h),f=Math.cos(l)*Math.sin(u)*Math.cos(h)+Math.sin(l)*Math.cos(u)*Math.sin(h),d=Math.cos(l)*Math.cos(u)*Math.sin(h)-Math.sin(l)*Math.sin(u)*Math.cos(h),m=Math.cos(l)*Math.cos(u)*Math.cos(h)+Math.sin(l)*Math.sin(u)*Math.sin(h);(o=new _({x:p,y:f,z:d,w:m})).normalize()}this.origin=new D({position:n,orientation:o})}var v=t.getElementsByTagName("geometry");if(v.length>0){for(var g=v[0],b=null,y=0;y<g.childNodes.length;y++){var w=g.childNodes[y];if(1===w.nodeType){b=w;break}}if(b){var N=b.nodeName;"sphere"===N?this.geometry=new B({xml:b}):"box"===N?this.geometry=new U({xml:b}):"cylinder"===N?this.geometry=new P({xml:b}):"mesh"===N?this.geometry=new z({xml:b}):console.warn("Unknown geometry type "+N)}}var x=t.getElementsByTagName("material");x.length>0&&(this.material=new G({xml:x[0]}))}}class q{constructor(e){this.name=e.xml.getAttribute("name"),this.visuals=[];for(var t=e.xml.getElementsByTagName("visual"),r=0;r<t.length;r++)this.visuals.push(new j({xml:t[r]}))}}class V{constructor(e){this.name=e.xml.getAttribute("name"),this.type=e.xml.getAttribute("type");var t=e.xml.getElementsByTagName("parent");t.length>0&&(this.parent=t[0].getAttribute("link"));var r=e.xml.getElementsByTagName("child");r.length>0&&(this.child=r[0].getAttribute("link"));var i=e.xml.getElementsByTagName("limit");i.length>0&&(this.minval=parseFloat(i[0].getAttribute("lower")||"NaN"),this.maxval=parseFloat(i[0].getAttribute("upper")||"NaN"));var n=e.xml.getElementsByTagName("origin");if(0===n.length)this.origin=new D;else{var s=n[0].getAttribute("xyz"),a=new T;if(s){var o=s.split(" ");a=new T({x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])})}var c=n[0].getAttribute("rpy"),l=new _;if(c){var u=c.split(" "),h=parseFloat(u[0])/2,p=parseFloat(u[1])/2,f=parseFloat(u[2])/2,d=Math.sin(h)*Math.cos(p)*Math.cos(f)-Math.cos(h)*Math.sin(p)*Math.sin(f),m=Math.cos(h)*Math.sin(p)*Math.cos(f)+Math.sin(h)*Math.cos(p)*Math.sin(f),v=Math.cos(h)*Math.cos(p)*Math.sin(f)-Math.sin(h)*Math.sin(p)*Math.cos(f),g=Math.cos(h)*Math.cos(p)*Math.cos(f)+Math.sin(h)*Math.sin(p)*Math.sin(f);(l=new _({x:d,y:m,z:v,w:g})).normalize()}this.origin=new D({position:a,orientation:l})}}}var H=a(978);class X{materials={};links={};joints={};constructor(e){var t=e.xml,r=e.string;if(r&&(t=(new H.DOMParser).parseFromString(r,"text/xml").documentElement),!t)throw new Error("No URDF document parsed!");var i=t;this.name=i.getAttribute("name");for(var n=i.childNodes,s=0;s<n.length;s++){var a=n[s];if("material"===a.tagName){var o=new G({xml:a});void 0!==this.materials[o.name]?this.materials[o.name].isLink()?this.materials[o.name].assign(o):console.warn("Material "+o.name+"is not unique."):this.materials[o.name]=o}else if("link"===a.tagName){var c=new q({xml:a});if(void 0!==this.links[c.name])console.warn("Link "+c.name+" is not unique.");else{for(var l=0;l<c.visuals.length;l++){var u=c.visuals[l].material;null!==u&&u.name&&(void 0!==this.materials[u.name]?c.visuals[l].material=this.materials[u.name]:this.materials[u.name]=u)}this.links[c.name]=c}}else if("joint"===a.tagName){var h=new V({xml:a});this.joints[h.name]=h}}}}const $="1.4.1";globalThis.ROSLIB={REVISION:$,...e,...t,...r,...i,...n}})(),o})());